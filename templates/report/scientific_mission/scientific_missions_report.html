{% extends "admin/base_site.html" %}
{% load i18n admin_static %}

{% block breadcrumbs %}
<ul class="breadcrumb">
<li><a href="/">{% trans 'Home' %}</a><span class="divider">»</span></li>
<li><a href="/scientific_mission/report">{% trans 'Scientific mission report' %}</a><span class="divider">»</span></li>
<li class="active">{% trans 'Results' %}</li>
</ul>
{% endblock %}

{% block content %}

{% if missions %}

    <p>
        <a class="btn btn-primary" href="{% url 'scientific_missions_tex' %}?start_date={{ start_date|date:"Y-m-d" }}&end_date={{ end_date|date:"Y-m-d" }}"><i class="icon-download icon-white"></i> {% trans 'Download .tex file' %}</a>
    </p>

    <table class="table table-striped table-bordered">
    <tr>
        <th>{% trans "Researcher" %}</th><th>{% trans "Scientific mission" %}</th><th>{% trans "Local" %}</th>
        <th>{% trans "Start date" %}</th><th>{% trans "End date" %}</th>
    </tr>
    {% for mission in missions %}
        <tr>
            {% if mission.person and mission.person.institution == None %}
                <td>{{ mission.person }}</td>
            {% elif mission.person and mission.person.institution != None %}
                <td>{{ mission.person }} / {{ mission.person.institution.get_person_institution }}</td>
            {% endif %}

            {% if mission.mission != None and mission.project_activity != None %}
                <td>
                    {{ mission.mission }}<br>
                    {{ mission.project_activity.title }}
                </td>
            {% elif mission.mission != None %}
                <td>{{ mission.mission }}</td>
            {% elif mission.project_activity != None %}
                <td>{{ mission.project_activity.title }}</td>
            {% else %}
                <td>{% trans "No scientific missions found!" %}</td>
            {% endif %}
            {% if mission.destination_city.country_id == 31 %}
                <td>{{ mission.destination_city.name }},
                    {% if mission.destination_city.region_id == 370 %} AC {% endif %}
                    {% if mission.destination_city.region_id == 353 %} AL {% endif %}
                    {% if mission.destination_city.region_id == 352 %} AP {% endif %}
                    {% if mission.destination_city.region_id == 369 %} AM {% endif %}
                    {% if mission.destination_city.region_id == 366 %} BA {% endif %}
                    {% if mission.destination_city.region_id == 351 %} CE {% endif %}
                    {% if mission.destination_city.region_id == 365 %} ES {% endif %}
                    {% if mission.destination_city.region_id == 364 %} DF {% endif %}
                    {% if mission.destination_city.region_id == 363 %} GO {% endif %}
                    {% if mission.destination_city.region_id == 350 %} MA {% endif %}
                    {% if mission.destination_city.region_id == 362 %} MT {% endif %}
                    {% if mission.destination_city.region_id == 361 %} MS {% endif %}
                    {% if mission.destination_city.region_id == 360 %} MG {% endif %}
                    {% if mission.destination_city.region_id == 349 %} PA {% endif %}
                    {% if mission.destination_city.region_id == 348 %} PB {% endif %}
                    {% if mission.destination_city.region_id == 359 %} PR {% endif %}
                    {% if mission.destination_city.region_id == 347 %} PE {% endif %}
                    {% if mission.destination_city.region_id == 346 %} PI {% endif %}
                    {% if mission.destination_city.region_id == 358 %} RJ {% endif %}
                    {% if mission.destination_city.region_id == 345 %} RN {% endif %}
                    {% if mission.destination_city.region_id == 357 %} RS {% endif %}
                    {% if mission.destination_city.region_id == 371 %} RO {% endif %}
                    {% if mission.destination_city.region_id == 368 %} RR {% endif %}
                    {% if mission.destination_city.region_id == 356 %} SC {% endif %}
                    {% if mission.destination_city.region_id == 355 %} SP {% endif %}
                    {% if mission.destination_city.region_id == 354 %} SE {% endif %}
                    {% if mission.destination_city.region_id == 367 %} TO {% endif %}
                </td>
            {% else %}
                <td>{{ mission.destination_city.name }}, {{ mission.destination_city.country }}</td>
            {% endif %}
            <td>{{ mission.departure|date:"M d, Y" }}</td>
            <td>{{ mission.arrival|date:"M d, Y" }}</td>
        </tr>
    {% endfor %}
    </table>

{%  else %}
    {% trans "No scientific missions found!" %}
{% endif %}

{% endblock %}